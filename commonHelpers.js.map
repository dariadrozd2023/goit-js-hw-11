{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport * as basicLightbox from 'basiclightbox';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst refs = {\n  formSearch: document.getElementById('formSearch'),\n  inputSearch: document.getElementById('inputSearch'),\n  btnSearch: document.getElementById('btnSearch'),\n  galleryList: document.querySelector('.js-ImagesCart'),\n  loader: document.querySelector('.loader'),\n};\nrefs.formSearch.addEventListener('submit', onBtnSearch);\nrefs.galleryList.addEventListener('click', showLargeImg);\n\nconst lightbox = new SimpleLightbox('.js-ImagesCart a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function onBtnSearch(event) {\n  event.preventDefault();\n  const URL_SEARCH_IMAGES = 'https://pixabay.com/api/';\n  const API_KEY = '43910002-4f8293575df59775d1c0606c1';\n  const inputValue = refs.inputSearch.value.trim();\n\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: inputValue,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    lang: 'en',\n  });\n\n  refs.loader.style.display = 'block';\n\n  return fetch(`${URL_SEARCH_IMAGES}?${params}`)\n    .then(res => {\n      if (!res.ok) {\n        throw new Error(res.statusText);\n      }\n      return res.json();\n    })\n    .then(data => {\n      if (data.hits.length === 0) {\n        iziToast.show({\n          message:\n            'Sorry, there are no images matching your search query. Please, try again!',\n          timeout: 5000,\n          backgroundColor: '#EF4040',\n        });\n        return;\n      }\n      refs.galleryList.innerHTML = markUpSearchImg(data.hits);\n      lightbox.refresh();\n    })\n    .catch(error => {\n      console.log(error);\n      iziToast.show({\n        message: 'Something went wrong. Please, try again later.',\n        timeout: 5000,\n        backgroundColor: '#EF4040',\n      });\n    })\n    .finally(() => {\n      refs.loader.style.display = 'none';\n    // console.log(event.target.elements);\n    });\n}\nfunction markUpSearchImg(arr) {\n  return arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `\n          <li class=\"js-list\">\n              <a href=\"${largeImageURL}\"><img class=\"js-image\" src=\"${webformatURL}\" alt=\"${tags}\" /></a>\n              <ul class=\"js-dates\">\n                  <li class=\"js-likes\">Likes: ${likes}</li>\n                  <li class=\"js-views\">Views: ${views}</li>\n                  <li class=\"js-comments\">Comments: ${comments}</li>\n                  <li class=\"js-downloads\">Downloads: ${downloads}</li>\n              </ul>\n          </li>\n      `\n    )\n    .join('');\n}\nfunction showLargeImg(event) {\n  event.preventDefault();\n  if (event.target.nodeName !== 'IMG') {\n    return;\n  }\n  const largeImageURL = event.target.closest('a').href;\n  const instance = basicLightbox.create(\n    `<img src=\"${largeImageURL}\" width=\"800\" height=\"600\" alt=\"${event.target.alt}\">`,\n    {\n      onShow: () => {\n        document.addEventListener('keydown', handleEscapeKeyPress);\n      },\n      onClose: () => {\n        document.removeEventListener('keydown', handleEscapeKeyPress);\n      },\n    }\n  );\n  instance.show();\n}\nfunction handleEscapeKeyPress(event) {\n  if (event.code === 'Escape') {\n    const instance = basicLightbox.visible();\n    if (instance) {\n      instance.close();\n    }\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n\nconst refs = {\n    formSearch: document.getElementById('formSearch'),\n    inputSearch: document.getElementById('inputSearch'),\n    btnSearch: document.getElementById('btnSearch'),\n    galleryList: document.querySelector('.js-ImagesCart'),\n    loader: document.querySelector('.loader'),\n\n  };\n  \n  export function submitSearch(e) {\n      e.preventDefault();\n      checkInput();\n\n  }\n  \n\n export function checkInput() {\n      const inputValue = refs.inputSearch.value.trim();\n      if (inputValue ==='' ) {\n          iziToast.show({\n              message:\n                'please,enter the name of the picture you are looking fo for',\n              timeout: 5000,\n              backgroundColor: '#a0cdde',\n            });\n            \n        refs.btnSearch.disabled = true; // робимо кнопку неактивною\n      } else {\n        refs.btnSearch.disabled = false; // робимо кнопку активною у разі успіху\n      }\n    }\n\n\n\n","import * as Render from './js/render-functions';\nimport * as Pixibay from './js/pixabay-api';\n\nconst refs = {\n  formSearch: document.getElementById('formSearch'),\n  inputSearch: document.getElementById('inputSearch'),\n  btnSearch: document.getElementById('btnSearch'),\n  galleryList: document.querySelector('.js-ImagesCart'),\n  loader: document.querySelector('.loader'),\n\n};\n\nrefs.formSearch.addEventListener('submit', Pixibay.submitSearch);\nrefs.inputSearch.addEventListener('input', Pixibay.checkInput);\nrefs.btnSearch.addEventListener('click', Render.onBtnSearch);\n"],"names":["refs","onBtnSearch","showLargeImg","lightbox","SimpleLightbox","event","URL_SEARCH_IMAGES","API_KEY","inputValue","params","res","data","iziToast","markUpSearchImg","error","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","basicLightbox.create","handleEscapeKeyPress","instance","basicLightbox.visible","submitSearch","e","checkInput","Pixibay.submitSearch","Pixibay.checkInput","Render.onBtnSearch"],"mappings":"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"}